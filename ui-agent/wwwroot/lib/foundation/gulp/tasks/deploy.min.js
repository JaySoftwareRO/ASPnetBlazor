/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/gulp/tasks/deploy.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var NEXT_VERSION,gulp=require("gulp"),filter=require("gulp-filter"),cleancss=require("gulp-clean-css"),rename=require("gulp-rename"),uglify=require("gulp-uglify"),confirm=require("gulp-prompt").confirm,rsync=require("gulp-rsync"),replace=require("gulp-replace"),octophant=require("octophant"),readline=require("readline"),{green:green,bold:bold}=require("kleur"),exec=require("child_process").execSync,plumber=require("gulp-plumber"),sourcemaps=require("gulp-sourcemaps"),rollup=require("rollup"),ROLLUP_CONFIG=require("../../rollup.config.js"),CONFIG=require("../config.js"),CURRENT_VERSION=require("../../package.json").version;gulp.task("deploy",gulp.series("deploy:prompt","deploy:version","deploy:dist","deploy:plugins","deploy:settings","deploy:commit","deploy:templates")),gulp.task("deploy:prep",gulp.series("deploy:prompt","deploy:version","deploy:dist","deploy:plugins","deploy:settings")),gulp.task("deploy:dist",gulp.series("sass:foundation","javascript:foundation","deploy:dist:files","deploy:dist:bundles")),gulp.task("deploy:plugins",gulp.series("deploy:plugins:sources","deploy:plugins:sourcemaps")),gulp.task("deploy:prompt",function(e){var s=readline.createInterface({input:process.stdin,output:process.stdout});s.question(green("?")+" "+bold("What version are we moving to? (Current version is "+CURRENT_VERSION+") "),p=>{NEXT_VERSION=p||CURRENT_VERSION,s.close(),e()})}),gulp.task("deploy:version",function(){return gulp.src(CONFIG.VERSIONED_FILES,{base:process.cwd()}).pipe(replace(CURRENT_VERSION,NEXT_VERSION)).pipe(gulp.dest("."))}),gulp.task("deploy:dist:files",function(){var e=filter(["**/*.css"],{restore:!0}),s=filter(["**/*.js"],{restore:!0}),p=filter(["**/*.css.map"],{restore:!0}),i=filter(["**/*.js.map"],{restore:!0}),r=filter(["**/*.ts"],{restore:!0});return gulp.src(CONFIG.DIST_FILES).pipe(plumber()).pipe(p).pipe(gulp.dest("./dist/css")).pipe(p.restore).pipe(i).pipe(gulp.dest("./dist/js")).pipe(i.restore).pipe(e).pipe(gulp.dest("./dist/css")).pipe(sourcemaps.init({loadMaps:!0})).pipe(rename({suffix:".min"})).pipe(cleancss({compatibility:"ie9"})).pipe(sourcemaps.write(".")).pipe(gulp.dest("./dist/css")).pipe(e.restore).pipe(s).pipe(gulp.dest("./dist/js")).pipe(sourcemaps.init({loadMaps:!0})).pipe(rename({suffix:".min"})).pipe(uglify()).pipe(sourcemaps.write(".")).pipe(gulp.dest("./dist/js")).pipe(s.restore).pipe(r).pipe(gulp.dest("./dist/js")).pipe(r.restore)}),gulp.task("deploy:dist:bundles",gulp.series(...ROLLUP_CONFIG.map(e=>(function(){return rollup.rollup(e).then(s=>s.write(e.output))})))),gulp.task("deploy:plugins:sources",function(){return gulp.src("_build/assets/js/plugins/*.js").pipe(gulp.dest("dist/js/plugins")).pipe(sourcemaps.init({loadMaps:!0})).pipe(rename({suffix:".min"})).pipe(uglify()).pipe(sourcemaps.write(".")).pipe(gulp.dest("dist/js/plugins"))}),gulp.task("deploy:plugins:sourcemaps",function(){return gulp.src("_build/assets/js/plugins/*.js.map").pipe(gulp.dest("dist/js/plugins"))}),gulp.task("deploy:settings",function(e){octophant("./scss",{title:"Foundation for Sites Settings",output:"./scss/settings/_settings.scss",groups:{grid:"The Grid","off-canvas":"Off-canvas","typography-base":"Base Typography"},sort:["global","breakpoints","grid","typography-base","typography-helpers"],imports:["util/util"],_foundationShim:!0},e)}),gulp.task("deploy:commit",function(){exec('git commit -am "Bump to version "'+NEXT_VERSION),exec("git tag v"+NEXT_VERSION),exec("git push origin develop --follow-tags")}),gulp.task("deploy:docs",gulp.series("build",function(){return gulp.src("./_build/**").pipe(confirm("Make sure everything looks right before you deploy.")).pipe(rsync({root:"./_build",hostname:"deployer@72.32.134.77",destination:"/home/deployer/sites/foundation-sites-6-docs"}))})),gulp.task("deploy:beta",gulp.series("build",function(){return gulp.src("./_build/**").pipe(confirm("Make sure everything looks right before you deploy.")).pipe(rsync({root:"./_build",hostname:"deployer@72.32.134.77",destination:"/home/deployer/sites/scalingsexiness/foundation-sites-6-docs"}))})),gulp.task("deploy:templates",function(e){e()}),gulp.task("deploy:custom",gulp.series("sass:foundation","javascript:foundation",gulp.parallel(function(){return gulp.src("./_build/assets/css/foundation.css").pipe(cleancss({compatibility:"ie9"})).pipe(rename("foundation.min.css")).pipe(gulp.dest("./_build/assets/css"))},function(){return gulp.src("_build/assets/js/foundation.js").pipe(uglify()).pipe(rename("foundation.min.js")).pipe(gulp.dest("./_build/assets/js"))})));
//# sourceMappingURL=/sm/7ce44e2684ef3aa443a09d888e8476faf7f7bf0824a3bf8019802c7acd7ee32f.map