/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/gulp/tasks/customizer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var CUSTOMIZER_CONFIG,MODULE_LIST,VARIABLE_LIST,addSrc=require("gulp-add-src"),cleancss=require("gulp-clean-css"),customizer=require("../../customizer/lib"),Vinyl=require("vinyl"),fs=require("fs"),gulp=require("gulp"),If=require("gulp-if"),path=require("path"),Readable=require("stream").Readable,replace=require("gulp-replace"),rename=require("gulp-rename"),rimraf=require("rimraf"),sass=require("gulp-sass"),uglify=require("gulp-uglify"),yaml=require("js-yaml").safeLoad,zip=require("gulp-zip"),postcss=require("gulp-postcss"),autoprefixer=require("autoprefixer"),webpackStream=require("webpack-stream"),webpack=require("webpack"),utils=require("../utils.js"),processedArgv=utils.getProccessedArgv(),FOUNDATION_VERSION=require("../../package.json").version,OUTPUT_DIR=processedArgv.values["--output"]||"custom-build",WEBPACK_CONFIG={mode:"development",externals:utils.umdExternals({jquery:"jQuery"}),module:{rules:[{test:/.js$/,use:[{loader:"babel-loader"}]}]},output:{libraryTarget:"umd"}};function createStream(e,s){var r=new Readable({objectMode:!0});return r._read=function(){},r.push(new Vinyl({path:e,contents:new Buffer(s)})),r.push(null),r}gulp.task("customizer:loadConfig",function(e){fs.readFile("customizer/config.yml",function(s,r){var t=processedArgv.values["--modules"]||"../../customizer/complete",i=require(t);CUSTOMIZER_CONFIG=yaml(r.toString()),MODULE_LIST=i.modules,VARIABLE_LIST=i.variables||{},e()})}),gulp.task("customizer:prepareSassDeps",function(){return gulp.src(["node_modules/@(sassy-lists)/stylesheets/helpers/missing-dependencies","node_modules/@(sassy-lists)/stylesheets/helpers/true","node_modules/@(sassy-lists)/stylesheets/functions/contain","node_modules/@(sassy-lists)/stylesheets/functions/purge","node_modules/@(sassy-lists)/stylesheets/functions/remove","node_modules/@(sassy-lists)/stylesheets/functions/replace","node_modules/@(sassy-lists)/stylesheets/functions/to-list"]).pipe(gulp.dest("_vendor"))}),gulp.task("customizer:sass",gulp.series("customizer:loadConfig","customizer:prepareSassDeps",function(){return createStream("foundation.scss",customizer.sass(CUSTOMIZER_CONFIG,MODULE_LIST,VARIABLE_LIST)).pipe(sass({includePaths:["scss","node_modules/motion-ui/src"]})).pipe(postcss([autoprefixer()])).pipe(gulp.dest(path.join(OUTPUT_DIR,"css"))).pipe(cleancss({compatibility:"ie9"})).pipe(rename("foundation.min.css")).pipe(gulp.dest(path.join(OUTPUT_DIR,"css")))})),gulp.task("customizer:javascript-entry",gulp.series("customizer:loadConfig",function(){return createStream("foundation.js",customizer.js(CUSTOMIZER_CONFIG,MODULE_LIST)).pipe(gulp.dest(path.join(OUTPUT_DIR,"js/vendor")))})),gulp.task("customizer:javascript",gulp.series("customizer:javascript-entry",function(){return gulp.src(path.join(OUTPUT_DIR,"js/vendor/foundation.js")).pipe(webpackStream(WEBPACK_CONFIG,webpack)).pipe(rename("foundation.js")).pipe(gulp.dest(path.join(OUTPUT_DIR,"js/vendor"))).pipe(uglify()).pipe(rename("foundation.min.js")).pipe(addSrc(["node_modules/jquery/dist/jquery.js","node_modules/what-input/dist/what-input.js"])).pipe(gulp.dest(path.join(OUTPUT_DIR,"js/vendor")))})),gulp.task("customizer:html",gulp.series("customizer:loadConfig",function(){var e=VARIABLE_LIST["global-text-direction"]&&"rtl"===VARIABLE_LIST["global-text-direction"];return gulp.src("customizer/index.html").pipe(If(e,replace("ltr","rtl"))).pipe(gulp.dest(OUTPUT_DIR))})),gulp.task("customizer:zip",function(e){var s=path.dirname(OUTPUT_DIR),r=path.basename(OUTPUT_DIR);return fs.closeSync(fs.openSync(path.join(OUTPUT_DIR,"css/app.css"),"w")),fs.closeSync(fs.openSync(path.join(OUTPUT_DIR,"js/app.js"),"w")),fs.writeFileSync(path.join(OUTPUT_DIR,"js/app.js"),"$(document).foundation()\n"),gulp.src(path.join(OUTPUT_DIR,"/**/*")).pipe(zip(path.basename(r)+".zip")).pipe(gulp.dest(s))}),gulp.task("customizer:clean",function(e){rimraf(OUTPUT_DIR,e)}),gulp.task("customizer",gulp.series("customizer:sass","customizer:javascript","customizer:html","customizer:zip","customizer:clean"));
//# sourceMappingURL=/sm/0564facd9019437066dc2faac1ded9e632b7e62749c5c71dcc4c057a014d520f.map