/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/test/javascript/components/drilldown.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
describe("Drilldown Menu",function(){var n,e,i='<ul class="menu" data-drilldown style="width: 200px" id="m1">\n    <li>\n      <a href="#">Item 1</a>\n      <ul id="Menu-1" class="menu">\n        <li>\n          <a href="#">Item 1A</a>\n          <ul id="Menu-1A" class="menu">\n            <li><a href="#Item-1Aa">Item 1Aa</a></li>\n          </ul>\n        </li>\n        <li><a href="#Item-1B">Item 1B</a></li>\n        <li><a href="#Item-1C">Item 1C</a></li>\n      </ul>\n    </li>\n    <li>\n      <a href="#">Item 2</a>\n      <ul id="Menu-2" class="menu">\n        <li><a href="#Item-2A">Item 2A</a></li>\n        <li><a href="#Item-2B">Item 2B</a></li>\n      </ul>\n    </li>\n    <li><a href="#Item-3"> Item 3</a></li>\n  </ul>',o=`\n    <div>\n      <button id="trigger" data-toggle="target" type="button">Toggler</button>\n      <div id="target" class="is-hidden" data-toggler="is-hidden">\n        ${i}\n      </div>\n    </div>\n  `;afterEach(function(){n.destroy(),document.activeElement.blur(),e.remove()}),describe("constructor()",function(){it("stores the element and plugin options",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{})).$element.should.be.an("object"),n.options.should.be.an("object")})}),describe("init()",function(){it("stores additional elements",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{})).$submenuAnchors.should.be.an("object"),n.$submenus.should.be.an("object"),n.$menuItems.should.be.an("object")})}),describe("prepareMenu()",function(){it("wraps the submenus",function(){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{})}),it("adds ARIA attributes",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{})).$element.should.have.attr("role","tree"),n.$element.find("[data-submenu]").each(function(){$(this).should.have.attr("role","group"),$(this).should.have.attr("aria-hidden","true")}),n.$element.find(".is-drilldown-submenu-parent").each(function(){$(this).should.have.attr("aria-haspopup","true"),$(this).should.have.attr("aria-expanded","false"),$(this).should.have.attr("aria-label",$(this).children("a").first().text())}),n.$element.find("li:not(.js-drilldown-back)").each(function(){$(this).should.have.attr("role","treeitem")})})}),describe("show()",function(){it("shows the given submenu",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(0)),e.find("li.is-drilldown-submenu-parent").eq(0).find("ul").should.have.class("is-active")}),it("toggles ARIA attributes",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(0)),e.find("li.is-drilldown-submenu-parent").eq(0).should.have.attr("aria-expanded","true"),e.find("li.is-drilldown-submenu-parent").eq(0).children("ul").should.have.attr("aria-hidden","false")}),it("fires open.zf.drilldown event",function(o){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{}),e.on("open.zf.drilldown",function(){e.find("li.is-drilldown-submenu-parent").eq(0).find("ul").should.have.class("is-active"),o()}),n._show(e.find("li.is-drilldown-submenu-parent").eq(0))})}),describe("hide()",function(){it("hides the given submenu",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(0)),n._hide(e.find("li.is-drilldown-submenu-parent").eq(0).children("ul")),e.find("li.is-drilldown-submenu-parent").eq(0).children("ul").should.have.class("is-closing")}),it("toggles ARIA attributes",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(0)),n._hide(e.find("li.is-drilldown-submenu-parent").eq(0).children("ul")),e.find("li.is-drilldown-submenu-parent").eq(0).should.have.attr("aria-expanded","false"),e.find("li.is-drilldown-submenu-parent").eq(0).children("ul").should.have.attr("aria-hidden","true")}),it("fires hide.zf.drilldown event",function(o){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(0)),e.on("hide.zf.drilldown",function(){e.find("li.is-drilldown-submenu-parent").eq(0).children("ul").should.have.class("is-closing"),o()}),n._hide(e.find("li.is-drilldown-submenu-parent").eq(0).children("ul"))})}),describe("hideAll()",function(){it("hides all submenus",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(2)),n._hideAll(),e.find("ul[data-submenu].is-active").each(function(){$(this).should.have.class("is-closing")})}),it("fires close.zf.drilldown event",function(o){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(2)),e.one("close.zf.drilldown",function(){e.find("ul[data-submenu].is-active").each(function(){$(this).should.have.class("is-closing")}),o()}),n._hideAll()}),it("fires closed.zf.drilldown event",function(o){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(2));const d=e.find("ul[data-submenu]");n.$element.one(Foundation.transitionend(n.$element),function(){e.one("closed.zf.drilldown",function(){d.should.not.have.class("is-closing"),d.should.not.have.class("is-active"),o()})}),n._hideAll(),n.$element.triggerHandler(Foundation.transitionend(n.$element))})}),describe("back()",function(){it("hides current submenu",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(1)),e.find("li.is-drilldown-submenu-parent").eq(1).children("ul").children(".js-drilldown-back").trigger("click"),e.find("li.is-drilldown-submenu-parent").eq(1).children("ul").should.have.class("is-closing")}),it("shows parent submenu",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("li.is-drilldown-submenu-parent").eq(1)),e.find("li.is-drilldown-submenu-parent").eq(1).children("ul").children(".js-drilldown-back").trigger("click"),e.find("li.is-drilldown-submenu-parent").eq(0).children("ul").should.have.class("is-active")})}),describe("toggle events",function(){var i,d,l,t;beforeEach(function(){e=$(o).appendTo("body"),i=e.find("#trigger"),e.find("#target"),d=e.find("#target"),t=new Foundation.Toggler(d,{}),n=new Foundation.Drilldown(e.find("[data-drilldown]"),{autoHeight:!0}),l=e.find(".is-drilldown")}),it("correctly resize when opened",function(){i.focus().trigger("click"),l.height().should.be.within(110,120)}),it("correctly resize when closed",function(){i.focus().trigger("click"),i.focus().trigger("click"),l.height().should.be.equal(0)}),it("correctly resize when reopened on a submenu",function(){i.focus().trigger("click"),n._showMenu(e.find("#Menu-1A")),i.focus().trigger("click"),i.focus().trigger("click"),l.height().should.be.within(70,80)}),afterEach(function(){t.destroy()})}),describe("keyboard events",function(){it.skip("does not trap focus on root element going down",function(){e=$(i).appendTo("body");let o=$('<a tabindex="0">Dummy</a>').appendTo("body");n=new Foundation.Drilldown(e,{}),o.focus(),e.find("> li:last-child > a").trigger(window.mockKeyboardEvent("TAB")),document.activeElement.should.not.be.equal(e.find("> li:last-child > a")[0]),o.remove()}),it.skip("does not trap focus on root element going up",function(){let o=$('<a tabindex="0">Dummy</a>').appendTo("body");e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{}),o.focus(),e.find("> li:first-child > a").trigger(window.mockKeyboardEvent("TAB",{shift:!0})),document.activeElement.should.not.be.equal(e.find("> li:first-child > a")[0]),o.remove()}),it("closes current sub menu using ESC",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("> li:nth-child(1)")),e.find("> li:nth-child(1) > ul > li:first-child > a").focus().trigger(window.mockKeyboardEvent("ESCAPE")),e.find("> li:nth-child(1) > ul").should.have.class("is-closing")}),it("moves focus to next element on TAB",function(){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{}),e.find("> li:nth-child(1) > a").focus().trigger(window.mockKeyboardEvent("TAB")),document.activeElement.should.be.equal(e.find("> li:nth-child(2) > a")[0])}),it("moves focus to previous element on TAB",function(){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{}),e.find("> li:nth-child(2) > a").focus().trigger(window.mockKeyboardEvent("TAB",{shift:!0})),document.activeElement.should.be.equal(e.find("> li:nth-child(1) > a")[0])}),it("moves focus to next element on ARROW_DOWN",function(){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{}),e.find("> li:nth-child(1) > a").focus().trigger(window.mockKeyboardEvent("ARROW_DOWN")),document.activeElement.should.be.equal(e.find("> li:nth-child(2) > a")[0])}),it("moves focus to previous element on ARROW_UP",function(){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{}),e.find("> li:nth-child(2) > a").focus().trigger(window.mockKeyboardEvent("ARROW_UP")),document.activeElement.should.be.equal(e.find("> li:nth-child(1) > a")[0])}),it("opens child element on ARROW_RIGHT",function(){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{}),e.find("> li:nth-child(1) > a").focus().trigger(window.mockKeyboardEvent("ARROW_RIGHT")),e.find("> li:nth-child(1) > ul").should.have.class("is-active")}),it("focuses parent link if parentLink is true",function(o){e=$(i).appendTo("body"),n=new Foundation.Drilldown(e,{parentLink:!0}),e.find("> li:nth-child(1) > a").focus().trigger(window.mockKeyboardEvent("ARROW_RIGHT")),setTimeout(function(){e.find("> li:nth-child(1) > ul > li[data-is-parent-link] a")[0].should.be.equal(document.activeElement),o()},500)}),it("closes child element on ARROW_LEFT",function(){e=$(i).appendTo("body"),(n=new Foundation.Drilldown(e,{}))._show(e.find("> li:nth-child(1)")),e.find("> li:nth-child(1) > ul > li:first-child > a").focus().trigger(window.mockKeyboardEvent("ARROW_LEFT")),e.find("> li:nth-child(1) > ul").should.have.class("is-closing")})})});
//# sourceMappingURL=/sm/eb3ca04deaebce83aef09fc3fb0c716f6f7b27f92bc5a084b511b95d727505b1.map