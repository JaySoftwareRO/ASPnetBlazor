/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.dropdown.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Keyboard}from"./foundation.util.keyboard";import{GetYoDigits,ignoreMousedisappear}from"./foundation.core.utils";import{Positionable}from"./foundation.positionable";import{Triggers}from"./foundation.util.triggers";import{Touch}from"./foundation.util.touch";class Dropdown extends Positionable{_setup(t,e){this.$element=t,this.options=$.extend({},Dropdown.defaults,this.$element.data(),e),this.className="Dropdown",Touch.init($),Triggers.init($),this._init(),Keyboard.register("Dropdown",{ENTER:"toggle",SPACE:"toggle",ESCAPE:"close"})}_init(){var t=this.$element.attr("id");this.$anchors=$(`[data-toggle="${t}"]`).length?$(`[data-toggle="${t}"]`):$(`[data-open="${t}"]`),this.$anchors.attr({"aria-controls":t,"data-is-focus":!1,"data-yeti-box":t,"aria-haspopup":!0,"aria-expanded":!1}),this._setCurrentAnchor(this.$anchors.first()),this.options.parentClass?this.$parent=this.$element.parents("."+this.options.parentClass):this.$parent=null,void 0===this.$element.attr("aria-labelledby")&&(void 0===this.$currentAnchor.attr("id")&&this.$currentAnchor.attr("id",GetYoDigits(6,"dd-anchor")),this.$element.attr("aria-labelledby",this.$currentAnchor.attr("id"))),this.$element.attr({"aria-hidden":"true","data-yeti-box":t,"data-resize":t}),super._init(),this._events()}_getDefaultPosition(){var t=this.$element[0].className.match(/(top|left|right|bottom)/g);return t?t[0]:"bottom"}_getDefaultAlignment(){var t=/float-(\S+)/.exec(this.$currentAnchor.attr("class"));return t?t[1]:super._getDefaultAlignment()}_setPosition(){this.$element.removeClass(`has-position-${this.position} has-alignment-${this.alignment}`),super._setPosition(this.$currentAnchor,this.$element,this.$parent),this.$element.addClass(`has-position-${this.position} has-alignment-${this.alignment}`)}_setCurrentAnchor(t){this.$currentAnchor=$(t)}_events(){var t=this,e="ontouchstart"in window||void 0!==window.ontouchstart;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.$anchors.off("click.zf.trigger").on("click.zf.trigger",function(o){t._setCurrentAnchor(this),(!1===t.options.forceFollow||e&&t.options.hover&&!1===t.$element.hasClass("is-open"))&&o.preventDefault()}),this.options.hover&&(this.$anchors.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){t._setCurrentAnchor(this);var e=$("body").data();void 0!==e.whatinput&&"mouse"!==e.whatinput||(clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.open(),t.$anchors.data("hover",!0)},t.options.hoverDelay))}).on("mouseleave.zf.dropdown",ignoreMousedisappear(function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.close(),t.$anchors.data("hover",!1)},t.options.hoverDelay)})),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(t.timeout)}).on("mouseleave.zf.dropdown",ignoreMousedisappear(function(){clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.close(),t.$anchors.data("hover",!1)},t.options.hoverDelay)}))),this.$anchors.add(this.$element).on("keydown.zf.dropdown",function(e){var o=$(this);Keyboard.findFocusable(t.$element);Keyboard.handleKey(e,"Dropdown",{open:function(){o.is(t.$anchors)&&!o.is("input, textarea")&&(t.open(),t.$element.attr("tabindex",-1).focus(),e.preventDefault())},close:function(){t.close(),t.$anchors.focus()}})})}_addBodyHandler(){var t=$(document.body).not(this.$element),e=this;t.off("click.zf.dropdown tap.zf.dropdown").on("click.zf.dropdown tap.zf.dropdown",function(o){e.$anchors.is(o.target)||e.$anchors.find(o.target).length||e.$element.is(o.target)||e.$element.find(o.target).length||(e.close(),t.off("click.zf.dropdown tap.zf.dropdown"))})}open(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchors.addClass("hover").attr({"aria-expanded":!0}),this.$element.addClass("is-opening"),this._setPosition(),this.$element.removeClass("is-opening").addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var t=Keyboard.findFocusable(this.$element);t.length&&t.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.options.trapFocus&&Keyboard.trapFocus(this.$element),this.$element.trigger("show.zf.dropdown",[this.$element])}close(){if(!this.$element.hasClass("is-open"))return!1;this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchors.removeClass("hover").attr("aria-expanded",!1),this.$element.trigger("hide.zf.dropdown",[this.$element]),this.options.trapFocus&&Keyboard.releaseFocus(this.$element)}toggle(){if(this.$element.hasClass("is-open")){if(this.$anchors.data("hover"))return;this.close()}else this.open()}_destroy(){this.$element.off(".zf.trigger").hide(),this.$anchors.off(".zf.dropdown"),$(document.body).off("click.zf.dropdown tap.zf.dropdown")}}Dropdown.defaults={parentClass:null,hoverDelay:250,hover:!1,hoverPane:!1,vOffset:0,hOffset:0,position:"auto",alignment:"auto",allowOverlap:!1,allowBottomOverlap:!0,trapFocus:!1,autoFocus:!1,closeOnClick:!1,forceFollow:!0};export{Dropdown};
//# sourceMappingURL=/sm/c99d11a3fa55483c9f987c5c50cc8b9c055ff32b4036ffabcdde56ed1eccc16e.map