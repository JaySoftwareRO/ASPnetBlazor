/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.slider.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Keyboard}from"./foundation.util.keyboard";import{Move}from"./foundation.util.motion";import{GetYoDigits,rtl as Rtl}from"./foundation.core.utils";import{Plugin}from"./foundation.core.plugin";import{Touch}from"./foundation.util.touch";import{Triggers}from"./foundation.util.triggers";class Slider extends Plugin{_setup(t,i){this.$element=t,this.options=$.extend({},Slider.defaults,this.$element.data(),i),this.className="Slider",Touch.init($),Triggers.init($),this._init(),Keyboard.register("Slider",{ltr:{ARROW_RIGHT:"increase",ARROW_UP:"increase",ARROW_DOWN:"decrease",ARROW_LEFT:"decrease",SHIFT_ARROW_RIGHT:"increase_fast",SHIFT_ARROW_UP:"increase_fast",SHIFT_ARROW_DOWN:"decrease_fast",SHIFT_ARROW_LEFT:"decrease_fast",HOME:"min",END:"max"},rtl:{ARROW_LEFT:"increase",ARROW_RIGHT:"decrease",SHIFT_ARROW_LEFT:"increase_fast",SHIFT_ARROW_RIGHT:"decrease_fast"}})}_init(){this.inputs=this.$element.find("input"),this.handles=this.$element.find("[data-slider-handle]"),this.$handle=this.handles.eq(0),this.$input=this.inputs.length?this.inputs.eq(0):$(`#${this.$handle.attr("aria-controls")}`),this.$fill=this.$element.find("[data-slider-fill]").css(this.options.vertical?"height":"width",0);(this.options.disabled||this.$element.hasClass(this.options.disabledClass))&&(this.options.disabled=!0,this.$element.addClass(this.options.disabledClass)),this.inputs.length||(this.inputs=$().add(this.$input),this.options.binding=!0),this._setInitAttr(0),this.handles[1]&&(this.options.doubleSided=!0,this.$handle2=this.handles.eq(1),this.$input2=this.inputs.length>1?this.inputs.eq(1):$(`#${this.$handle2.attr("aria-controls")}`),this.inputs[1]||(this.inputs=this.inputs.add(this.$input2)),this._setInitAttr(1)),this.setHandles(),this._events()}setHandles(){this.handles[1]?this._setHandlePos(this.$handle,this.inputs.eq(0).val(),()=>{this._setHandlePos(this.$handle2,this.inputs.eq(1).val())}):this._setHandlePos(this.$handle,this.inputs.eq(0).val())}_reflow(){this.setHandles()}_pctOfBar(t){var i=percent(t-this.options.start,this.options.end-this.options.start);switch(this.options.positionValueFunction){case"pow":i=this._logTransform(i);break;case"log":i=this._powTransform(i)}return i.toFixed(2)}_value(t){switch(this.options.positionValueFunction){case"pow":t=this._powTransform(t);break;case"log":t=this._logTransform(t)}return this.options.vertical?parseFloat(this.options.end)+t*(this.options.start-this.options.end):(this.options.end-this.options.start)*t+parseFloat(this.options.start)}_logTransform(t){return baseLog(this.options.nonLinearBase,t*(this.options.nonLinearBase-1)+1)}_powTransform(t){return(Math.pow(this.options.nonLinearBase,t)-1)/(this.options.nonLinearBase-1)}_setHandlePos(t,i,e){if(!this.$element.hasClass(this.options.disabledClass)){(i=parseFloat(i))<this.options.start?i=this.options.start:i>this.options.end&&(i=this.options.end);var s=this.options.doubleSided;if(s)if(0===this.handles.index(t)){var n=parseFloat(this.$handle2.attr("aria-valuenow"));i=i>=n?n-this.options.step:i}else{var a=parseFloat(this.$handle.attr("aria-valuenow"));i=i<=a?a+this.options.step:i}var o=this,l=this.options.vertical,r=l?"height":"width",d=l?"top":"left",h=t[0].getBoundingClientRect()[r],p=this.$element[0].getBoundingClientRect()[r],u=this._pctOfBar(i),f=(100*percent((p-h)*u,p)).toFixed(this.options.decimal);i=parseFloat(i.toFixed(this.options.decimal));var c={};if(this._setValues(t,i),s){var g,m=0===this.handles.index(t),$=~~(100*percent(h,p));if(m)c[d]=`${f}%`,g=parseFloat(this.$handle2[0].style[d])-f+$,e&&"function"==typeof e&&e();else{var v=parseFloat(this.$handle[0].style[d]);g=f-(isNaN(v)?(this.options.initialStart-this.options.start)/((this.options.end-this.options.start)/100):v)+$}c[`min-${r}`]=`${g}%`}this.$element.one("finished.zf.animate",function(){o.$element.trigger("moved.zf.slider",[t])});var _=this.$element.data("dragging")?1e3/60:this.options.moveTime;Move(_,t,function(){isNaN(f)?t.css(d,`${100*u}%`):t.css(d,`${f}%`),o.options.doubleSided?o.$fill.css(c):o.$fill.css(r,`${100*u}%`)}),clearTimeout(o.timeout),o.timeout=setTimeout(function(){o.$element.trigger("changed.zf.slider",[t])},o.options.changedDelay)}}_setInitAttr(t){var i=0===t?this.options.initialStart:this.options.initialEnd,e=this.inputs.eq(t).attr("id")||GetYoDigits(6,"slider");this.inputs.eq(t).attr({id:e,max:this.options.end,min:this.options.start,step:this.options.step}),this.inputs.eq(t).val(i),this.handles.eq(t).attr({role:"slider","aria-controls":e,"aria-valuemax":this.options.end,"aria-valuemin":this.options.start,"aria-valuenow":i,"aria-orientation":this.options.vertical?"vertical":"horizontal",tabindex:0})}_setValues(t,i){var e=this.options.doubleSided?this.handles.index(t):0;this.inputs.eq(e).val(i),t.attr("aria-valuenow",i)}_handleEvent(t,i,e){var s;if(e)s=this._adjustValue(null,e),!0;else{t.preventDefault();var n=this.options.vertical,a=n?"height":"width",o=n?"top":"left",l=n?t.pageY:t.pageX,r=this.$element[0].getBoundingClientRect()[a],d=n?$(window).scrollTop():$(window).scrollLeft(),h=this.$element.offset()[o];t.clientY===t.pageY&&(l+=d);var p,u=l-h,f=percent(p=u<0?0:u>r?r:u,r);if(s=this._value(f),Rtl()&&!this.options.vertical&&(s=this.options.end-s),s=this._adjustValue(null,s),!1,!i)i=absPosition(this.$handle,o,p,a)<=absPosition(this.$handle2,o,p,a)?this.$handle:this.$handle2}this._setHandlePos(i,s)}_adjustValue(t,i){var e,s,n,a=this.options.step,o=parseFloat(a/2);return 0===(s=(e=t?parseFloat(t.attr("aria-valuenow")):i)>=0?e%a:a+e%a)?e:e=e>=(n=e-s)+o?n+a:n}_events(){this._eventsForHandle(this.$handle),this.handles[1]&&this._eventsForHandle(this.$handle2)}_eventsForHandle(t){var i,e=this;const s=function(t){const i=e.inputs.index($(this));e._handleEvent(t,e.handles.eq(i),$(this).val())};if(this.inputs.off("keyup.zf.slider").on("keyup.zf.slider",function(t){13==t.keyCode&&s.call(this,t)}),this.inputs.off("change.zf.slider").on("change.zf.slider",s),this.options.clickSelect&&this.$element.off("click.zf.slider").on("click.zf.slider",function(t){if(e.$element.data("dragging"))return!1;$(t.target).is("[data-slider-handle]")||(e.options.doubleSided?e._handleEvent(t):e._handleEvent(t,e.$handle))}),this.options.draggable){this.handles.addTouch();var n=$("body");t.off("mousedown.zf.slider").on("mousedown.zf.slider",function(s){t.addClass("is-dragging"),e.$fill.addClass("is-dragging"),e.$element.data("dragging",!0),i=$(s.currentTarget),n.on("mousemove.zf.slider",function(t){t.preventDefault(),e._handleEvent(t,i)}).on("mouseup.zf.slider",function(s){e._handleEvent(s,i),t.removeClass("is-dragging"),e.$fill.removeClass("is-dragging"),e.$element.data("dragging",!1),n.off("mousemove.zf.slider mouseup.zf.slider")})}).on("selectstart.zf.slider touchmove.zf.slider",function(t){t.preventDefault()})}t.off("keydown.zf.slider").on("keydown.zf.slider",function(t){var i,s=$(this),n=e.options.doubleSided?e.handles.index(s):0,a=parseFloat(e.inputs.eq(n).val());Keyboard.handleKey(t,"Slider",{decrease:function(){i=a-e.options.step},increase:function(){i=a+e.options.step},decrease_fast:function(){i=a-10*e.options.step},increase_fast:function(){i=a+10*e.options.step},min:function(){i=e.options.start},max:function(){i=e.options.end},handled:function(){t.preventDefault(),e._setHandlePos(s,i)}})})}_destroy(){this.handles.off(".zf.slider"),this.inputs.off(".zf.slider"),this.$element.off(".zf.slider"),clearTimeout(this.timeout)}}function percent(t,i){return t/i}function absPosition(t,i,e,s){return Math.abs(t.position()[i]+t[s]()/2-e)}function baseLog(t,i){return Math.log(i)/Math.log(t)}Slider.defaults={start:0,end:100,step:1,initialStart:0,initialEnd:100,binding:!1,clickSelect:!0,vertical:!1,draggable:!0,disabled:!1,doubleSided:!1,decimal:2,moveTime:200,disabledClass:"disabled",invertVertical:!1,changedDelay:500,nonLinearBase:5,positionValueFunction:"linear"};export{Slider};
//# sourceMappingURL=/sm/33fc9c9cc088579e8a72d05f10b0fd6231b90f05f70d4a83190c5c159b485245.map