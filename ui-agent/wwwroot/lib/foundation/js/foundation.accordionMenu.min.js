/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.accordionMenu.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Keyboard}from"./foundation.util.keyboard";import{Nest}from"./foundation.util.nest";import{GetYoDigits}from"./foundation.core.utils";import{Plugin}from"./foundation.core.plugin";class AccordionMenu extends Plugin{_setup(e,i){this.$element=e,this.options=$.extend({},AccordionMenu.defaults,this.$element.data(),i),this.className="AccordionMenu",this._init(),Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll"})}_init(){Nest.Feather(this.$element,"accordion");var e=this;this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"tree","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each(function(){var i=this.id||GetYoDigits(6,"acc-menu-link"),n=$(this),t=n.children("[data-submenu]"),s=t[0].id||GetYoDigits(6,"acc-menu"),a=t.hasClass("is-active");if(e.options.parentLink){n.children("a").clone().prependTo(t).wrap('<li data-is-parent-link class="is-submenu-parent-item is-submenu-item is-accordion-submenu-item"></li>')}e.options.submenuToggle?(n.addClass("has-submenu-toggle"),n.children("a").after('<button id="'+i+'" class="submenu-toggle" aria-controls="'+s+'" aria-expanded="'+a+'" title="'+e.options.submenuToggleText+'"><span class="submenu-toggle-text">'+e.options.submenuToggleText+"</span></button>")):n.attr({"aria-controls":s,"aria-expanded":a,id:i}),t.attr({"aria-labelledby":i,"aria-hidden":!a,role:"group",id:s})}),this.$element.find("li").attr({role:"treeitem"});var i=this.$element.find(".is-active");i.length&&i.each(function(){e.down($(this))}),this._events()}_events(){var e=this;this.$element.find("li").each(function(){var i=$(this).children("[data-submenu]");i.length&&(e.options.submenuToggle?$(this).children(".submenu-toggle").off("click.zf.accordionMenu").on("click.zf.accordionMenu",function(n){e.toggle(i)}):$(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",function(n){n.preventDefault(),e.toggle(i)}))}).on("keydown.zf.accordionMenu",function(i){var n,t,s=$(this),a=s.parent("ul").children("li"),o=s.children("[data-submenu]");a.each(function(e){if($(this).is(s))return n=a.eq(Math.max(0,e-1)).find("a").first(),t=a.eq(Math.min(e+1,a.length-1)).find("a").first(),$(this).children("[data-submenu]:visible").length&&(t=s.find("li:first-child").find("a").first()),$(this).is(":first-child")?n=s.parents("li").first().find("a").first():n.parents("li").first().children("[data-submenu]:visible").length&&(n=n.parents("li").find("li:last-child").find("a").first()),void($(this).is(":last-child")&&(t=s.parents("li").first().next("li").find("a").first()))}),Keyboard.handleKey(i,"AccordionMenu",{open:function(){o.is(":hidden")&&(e.down(o),o.find("li").first().find("a").first().focus())},close:function(){o.length&&!o.is(":hidden")?e.up(o):s.parent("[data-submenu]").length&&(e.up(s.parent("[data-submenu]")),s.parents("li").first().find("a").first().focus())},up:function(){return n.focus(),!0},down:function(){return t.focus(),!0},toggle:function(){return!e.options.submenuToggle&&(s.children("[data-submenu]").length?(e.toggle(s.children("[data-submenu]")),!0):void 0)},closeAll:function(){e.hideAll()},handled:function(e){e&&i.preventDefault()}})})}hideAll(){this.up(this.$element.find("[data-submenu]"))}showAll(){this.down(this.$element.find("[data-submenu]"))}toggle(e){e.is(":animated")||(e.is(":hidden")?this.down(e):this.up(e))}down(e){if(!this.options.multiOpen){const i=e.parentsUntil(this.$element).add(e).add(e.find(".is-active")),n=this.$element.find(".is-active").not(i);this.up(n)}e.addClass("is-active").attr({"aria-hidden":!1}),this.options.submenuToggle?e.prev(".submenu-toggle").attr({"aria-expanded":!0}):e.parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),e.slideDown(this.options.slideSpeed,()=>{this.$element.trigger("down.zf.accordionMenu",[e])})}up(e){const i=e.find("[data-submenu]"),n=e.add(i);i.slideUp(0),n.removeClass("is-active").attr("aria-hidden",!0),this.options.submenuToggle?n.prev(".submenu-toggle").attr("aria-expanded",!1):n.parent(".is-accordion-submenu-parent").attr("aria-expanded",!1),e.slideUp(this.options.slideSpeed,()=>{this.$element.trigger("up.zf.accordionMenu",[e])})}_destroy(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),this.$element.find("[data-is-parent-link]").detach(),this.options.submenuToggle&&(this.$element.find(".has-submenu-toggle").removeClass("has-submenu-toggle"),this.$element.find(".submenu-toggle").remove()),Nest.Burn(this.$element,"accordion")}}AccordionMenu.defaults={parentLink:!1,slideSpeed:250,submenuToggle:!1,submenuToggleText:"Toggle menu",multiOpen:!0};export{AccordionMenu};
//# sourceMappingURL=/sm/85f3411f5bcbf8591ffd773ea2880ab8d38d811681eec825093fee86a20028fc.map