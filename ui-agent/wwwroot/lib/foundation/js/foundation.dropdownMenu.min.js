/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.dropdownMenu.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Plugin}from"./foundation.core.plugin";import{rtl as Rtl,ignoreMousedisappear}from"./foundation.core.utils";import{Keyboard}from"./foundation.util.keyboard";import{Nest}from"./foundation.util.nest";import{Box}from"./foundation.util.box";import{Touch}from"./foundation.util.touch";class DropdownMenu extends Plugin{_setup(e,n){this.$element=e,this.options=$.extend({},DropdownMenu.defaults,this.$element.data(),n),this.className="DropdownMenu",Touch.init($),this._init(),Keyboard.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}_init(){Nest.Feather(this.$element,"dropdown");var e=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('li[role="none"]'),this.$tabs=this.$element.children('li[role="none"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),"auto"===this.options.alignment?this.$element.hasClass(this.options.rightClass)||Rtl()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",e.addClass("opens-left")):(this.options.alignment="left",e.addClass("opens-right")):"right"===this.options.alignment?e.addClass("opens-left"):e.addClass("opens-right"),this.changed=!1,this._events()}_isVertical(){return"block"===this.$tabs.css("display")||"column"===this.$element.css("flex-direction")}_isRtl(){return this.$element.hasClass("align-right")||Rtl()&&!this.$element.hasClass("align-left")}_events(){var e=this,n="ontouchstart"in window||void 0!==window.ontouchstart,t="is-dropdown-submenu-parent";(this.options.clickOpen||n)&&this.$menuItems.on("click.zf.dropdownMenu touchstart.zf.dropdownMenu",function(i){var o=$(i.target).parentsUntil("ul",`.${t}`),s=o.hasClass(t),a="true"===o.attr("data-is-click"),r=o.children(".is-dropdown-submenu");if(s)if(a){if(!e.options.closeOnClick||!e.options.clickOpen&&!n||e.options.forceFollow&&n)return;i.stopImmediatePropagation(),i.preventDefault(),e._hide(o)}else i.stopImmediatePropagation(),i.preventDefault(),e._show(r),o.add(o.parentsUntil(e.$element,`.${t}`)).attr("data-is-click",!0)}),e.options.closeOnClickInside&&this.$menuItems.on("click.zf.dropdownMenu",function(n){$(this).hasClass(t)||e._hide()}),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownMenu",function(n){var i=$(this);i.hasClass(t)&&(clearTimeout(i.data("_delay")),i.data("_delay",setTimeout(function(){e._show(i.children(".is-dropdown-submenu"))},e.options.hoverDelay)))}).on("mouseleave.zf.dropdownMenu",ignoreMousedisappear(function(n){var i=$(this);if(i.hasClass(t)&&e.options.autoclose){if("true"===i.attr("data-is-click")&&e.options.clickOpen)return!1;clearTimeout(i.data("_delay")),i.data("_delay",setTimeout(function(){e._hide(i)},e.options.closingTime))}})),this.$menuItems.on("keydown.zf.dropdownMenu",function(n){var t,i,o=$(n.target).parentsUntil("ul",'[role="none"]'),s=e.$tabs.index(o)>-1,a=s?e.$tabs:o.siblings("li").add(o);a.each(function(e){if($(this).is(o))return t=a.eq(e-1),void(i=a.eq(e+1))});var r=function(){i.children("a:first").focus(),n.preventDefault()},d=function(){t.children("a:first").focus(),n.preventDefault()},l=function(){var t=o.children("ul.is-dropdown-submenu");t.length&&(e._show(t),o.find("li > a:first").focus(),n.preventDefault())},u=function(){var t=o.parent("ul").parent("li");t.children("a:first").focus(),e._hide(t),n.preventDefault()},p={open:l,close:function(){e._hide(e.$element),e.$menuItems.eq(0).children("a").focus(),n.preventDefault()}};s?e._isVertical()?e._isRtl()?$.extend(p,{down:r,up:d,next:u,previous:l}):$.extend(p,{down:r,up:d,next:l,previous:u}):e._isRtl()?$.extend(p,{next:d,previous:r,down:l,up:u}):$.extend(p,{next:r,previous:d,down:l,up:u}):e._isRtl()?$.extend(p,{next:u,previous:l,down:r,up:d}):$.extend(p,{next:l,previous:u,down:r,up:d}),Keyboard.handleKey(n,"DropdownMenu",p)})}_addBodyHandler(){const e=$(document.body);this._removeBodyHandler(),e.on("click.zf.dropdownMenu tap.zf.dropdownMenu",e=>{!!$(e.target).closest(this.$element).length||(this._hide(),this._removeBodyHandler())})}_removeBodyHandler(){$(document.body).off("click.zf.dropdownMenu tap.zf.dropdownMenu")}_show(e){var n=this.$tabs.index(this.$tabs.filter(function(n,t){return $(t).find(e).length>0})),t=e.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(t,n),e.css("visibility","hidden").addClass("js-dropdown-active").parent("li.is-dropdown-submenu-parent").addClass("is-active");var i=Box.ImNotTouchingYou(e,null,!0);if(!i){var o="left"===this.options.alignment?"-right":"-left",s=e.parent(".is-dropdown-submenu-parent");s.removeClass(`opens${o}`).addClass(`opens-${this.options.alignment}`),(i=Box.ImNotTouchingYou(e,null,!0))||s.removeClass(`opens-${this.options.alignment}`).addClass("opens-inner"),this.changed=!0}e.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownMenu",[e])}_hide(e,n){var t;if((t=e&&e.length?e:void 0!==n?this.$tabs.not(function(e,t){return e===n}):this.$element).hasClass("is-active")||t.find(".is-active").length>0){var i=t.find("li.is-active");if(i.add(t).attr({"data-is-click":!1}).removeClass("is-active"),t.find("ul.js-dropdown-active").removeClass("js-dropdown-active"),this.changed||t.find("opens-inner").length){var o="left"===this.options.alignment?"right":"left";t.find("li.is-dropdown-submenu-parent").add(t).removeClass(`opens-inner opens-${this.options.alignment}`).addClass(`opens-${o}`),this.changed=!1}clearTimeout(i.data("_delay")),this._removeBodyHandler(),this.$element.trigger("hide.zf.dropdownMenu",[t])}}_destroy(){this.$menuItems.off(".zf.dropdownMenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),$(document.body).off(".zf.dropdownMenu"),Nest.Burn(this.$element,"dropdown")}}DropdownMenu.defaults={disableHover:!1,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"auto",closeOnClick:!0,closeOnClickInside:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0};export{DropdownMenu};
//# sourceMappingURL=/sm/be31a55b053218eecdc4dc052aa66bc63a0b0da1962c72dcb024ed91ff141502.map