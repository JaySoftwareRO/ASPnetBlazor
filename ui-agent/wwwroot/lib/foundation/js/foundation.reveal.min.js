/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.reveal.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Plugin}from"./foundation.core.plugin";import{onLoad}from"./foundation.core.utils";import{Keyboard}from"./foundation.util.keyboard";import{MediaQuery}from"./foundation.util.mediaQuery";import{Motion}from"./foundation.util.motion";import{Triggers}from"./foundation.util.triggers";import{Touch}from"./foundation.util.touch";class Reveal extends Plugin{_setup(e,t){this.$element=e,this.options=$.extend({},Reveal.defaults,this.$element.data(),t),this.className="Reveal",this._init(),Touch.init($),Triggers.init($),Keyboard.register("Reveal",{ESCAPE:"close"})}_init(){MediaQuery._init(),this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:MediaQuery.current},this.$anchor=$(`[data-open="${this.id}"]`).length?$(`[data-open="${this.id}"]`):$(`[data-toggle="${this.id}"]`),this.$anchor.attr({"aria-controls":this.id,"aria-haspopup":!0,tabindex:0}),(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo($(this.options.appendTo)),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash===`#${this.id}`&&(this.onLoadListener=onLoad($(window),()=>this.open()))}_makeOverlay(){var e="";return this.options.additionalOverlayClasses&&(e=" "+this.options.additionalOverlayClasses),$("<div></div>").addClass("reveal-overlay"+e).appendTo(this.options.appendTo)}_updatePosition(){var e,t=this.$element.outerWidth(),i=$(window).width(),s=this.$element.outerHeight(),o=$(window).height(),n=null;e="auto"===this.options.hOffset?parseInt((i-t)/2,10):parseInt(this.options.hOffset,10),"auto"===this.options.vOffset?n=s>o?parseInt(Math.min(100,o/10),10):parseInt((o-s)/4,10):null!==this.options.vOffset&&(n=parseInt(this.options.vOffset,10)),null!==n&&this.$element.css({top:n+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:e+"px"}),this.$element.css({margin:"0px"}))}_events(){var e=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":(t,i)=>{if(t.target===e.$element[0]||$(t.target).parents("[data-closable]")[0]===i)return this.close.apply(this)},"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){e._updatePosition()}}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.dropdown tap.zf.dropdown",function(t){t.target!==e.$element[0]&&!$.contains(e.$element[0],t.target)&&$.contains(document,t.target)&&e.close()}),this.options.deepLink&&$(window).on(`hashchange.zf.reveal:${this.id}`,this._handleState.bind(this))}_handleState(e){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}_disableScroll(e){e=e||$(window).scrollTop(),$(document).height()>$(window).height()&&$("html").css("top",-e)}_enableScroll(e){e=e||parseInt($("html").css("top")),$(document).height()>$(window).height()&&($("html").css("top",""),$(window).scrollTop(-e))}open(){const e=`#${this.id}`;this.options.deepLink&&window.location.hash!==e&&(window.history.pushState?this.options.updateHistory?window.history.pushState({},"",e):window.history.replaceState({},"",e):window.location.hash=e),this.$activeAnchor=$(document.activeElement).is(this.$anchor)?$(document.activeElement):this.$anchor,this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&(this.$overlay.css({visibility:""}).hide(),this.$element.hasClass("fast")?this.$overlay.addClass("fast"):this.$element.hasClass("slow")&&this.$overlay.addClass("slow")),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id),0===$(".reveal:visible").length&&this._disableScroll();var t=this;if(this.options.animationIn){this.options.overlay&&Motion.animateIn(this.$overlay,"fade-in"),Motion.animateIn(this.$element,this.options.animationIn,()=>{this.$element&&(this.focusableElements=Keyboard.findFocusable(this.$element),t.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),t._addGlobalClasses(),Keyboard.trapFocus(t.$element))})}else this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay);this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),Keyboard.trapFocus(this.$element),this._addGlobalClasses(),this._addGlobalListeners(),this.$element.trigger("open.zf.reveal")}_addGlobalClasses(){const e=()=>{$("html").toggleClass("zf-has-scroll",!!($(document).height()>$(window).height()))};this.$element.on("resizeme.zf.trigger.revealScrollbarListener",()=>e()),e(),$("html").addClass("is-reveal-open")}_removeGlobalClasses(){this.$element.off("resizeme.zf.trigger.revealScrollbarListener"),$("html").removeClass("is-reveal-open"),$("html").removeClass("zf-has-scroll")}_addGlobalListeners(){var e=this;this.$element&&(this.focusableElements=Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||$("body").on("click.zf.dropdown tap.zf.dropdown",function(t){t.target!==e.$element[0]&&!$.contains(e.$element[0],t.target)&&$.contains(document,t.target)&&e.close()}),this.options.closeOnEsc&&$(window).on("keydown.zf.reveal",function(t){Keyboard.handleKey(t,"Reveal",{close:function(){e.options.closeOnEsc&&e.close()}})}))}close(){if(!this.isActive||!this.$element.is(":visible"))return!1;var e=this;function t(){var t=parseInt($("html").css("top"));0===$(".reveal:visible").length&&e._removeGlobalClasses(),Keyboard.releaseFocus(e.$element),e.$element.attr("aria-hidden",!0),0===$(".reveal:visible").length&&e._enableScroll(t),e.$element.trigger("closed.zf.reveal")}if(this.options.animationOut?(this.options.overlay&&Motion.animateOut(this.$overlay,"fade-out"),Motion.animateOut(this.$element,this.options.animationOut,t)):(this.$element.hide(this.options.hideDelay),this.options.overlay?this.$overlay.hide(0,t):t()),this.options.closeOnEsc&&$(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&$("body").off("click.zf.dropdown tap.zf.dropdown"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,e.options.deepLink&&window.location.hash===`#${this.id}`)if(window.history.replaceState){const e=window.location.pathname+window.location.search;this.options.updateHistory?window.history.pushState({},"",e):window.history.replaceState("",document.title,e)}else window.location.hash="";this.$activeAnchor.focus()}toggle(){this.isActive?this.close():this.open()}_destroy(){this.options.overlay&&(this.$element.appendTo($(this.options.appendTo)),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),$(window).off(`.zf.reveal:${this.id}`),this.onLoadListener&&$(window).off(this.onLoadListener),0===$(".reveal:visible").length&&this._removeGlobalClasses()}}Reveal.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,overlay:!0,resetOnClose:!1,deepLink:!1,updateHistory:!1,appendTo:"body",additionalOverlayClasses:""};export{Reveal};
//# sourceMappingURL=/sm/0745d3ede4ded264d1488dce8954631374356900a07e2771017fd4dc97416a85.map