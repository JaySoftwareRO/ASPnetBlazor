/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.accordion.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Plugin}from"./foundation.core.plugin";import{onLoad,GetYoDigits}from"./foundation.core.utils";import{Keyboard}from"./foundation.util.keyboard";class Accordion extends Plugin{_setup(i,e){this.$element=i,this.options=$.extend({},Accordion.defaults,this.$element.data(),e),this.className="Accordion",this._init(),Keyboard.register("Accordion",{ENTER:"toggle",SPACE:"toggle",ARROW_DOWN:"next",ARROW_UP:"previous"})}_init(){this._isInitializing=!0,this.$element.attr("role","tablist"),this.$tabs=this.$element.children("[data-accordion-item]"),this.$tabs.attr({role:"presentation"}),this.$tabs.each(function(i,e){var t=$(e),n=t.children("[data-tab-content]"),a=n[0].id||GetYoDigits(6,"accordion"),o=e.id?`${e.id}-label`:`${a}-label`;t.find("a:first").attr({"aria-controls":a,role:"tab",id:o,"aria-expanded":!1,"aria-selected":!1}),n.attr({role:"tabpanel","aria-labelledby":o,"aria-hidden":!0,id:a})});var i=this.$element.find(".is-active").children("[data-tab-content]");i.length&&(this._initialAnchor=i.prev("a").attr("href"),this._openSingleTab(i)),this._checkDeepLink=(()=>{var i=window.location.hash;if(!i.length){if(this._isInitializing)return;this._initialAnchor&&(i=this._initialAnchor)}var e=i&&$(i),t=i&&this.$element.find(`[href$="${i}"]`);!(!e.length||!t.length)&&(e&&t&&t.length?t.parent("[data-accordion-item]").hasClass("is-active")||this._openSingleTab(e):this._closeAllTabs(),this.options.deepLinkSmudge&&onLoad($(window),()=>{var i=this.$element.offset();$("html, body").animate({scrollTop:i.top-this.options.deepLinkSmudgeOffset},this.options.deepLinkSmudgeDelay)}),this.$element.trigger("deeplink.zf.accordion",[t,e]))}),this.options.deepLink&&this._checkDeepLink(),this._events(),this._isInitializing=!1}_events(){var i=this;this.$tabs.each(function(){var e=$(this),t=e.children("[data-tab-content]");t.length&&e.children("a").off("click.zf.accordion keydown.zf.accordion").on("click.zf.accordion",function(e){e.preventDefault(),i.toggle(t)}).on("keydown.zf.accordion",function(n){Keyboard.handleKey(n,"Accordion",{toggle:function(){i.toggle(t)},next:function(){var t=e.next().find("a").focus();i.options.multiExpand||t.trigger("click.zf.accordion")},previous:function(){var t=e.prev().find("a").focus();i.options.multiExpand||t.trigger("click.zf.accordion")},handled:function(){n.preventDefault()}})})}),this.options.deepLink&&$(window).on("hashchange",this._checkDeepLink)}toggle(i){if(i.closest("[data-accordion]").is("[disabled]"))console.info("Cannot toggle an accordion that is disabled.");else if(i.parent().hasClass("is-active")?this.up(i):this.down(i),this.options.deepLink){var e=i.prev("a").attr("href");this.options.updateHistory?history.pushState({},"",e):history.replaceState({},"",e)}}down(i){i.closest("[data-accordion]").is("[disabled]")?console.info("Cannot call down on an accordion that is disabled."):this.options.multiExpand?this._openTab(i):this._openSingleTab(i)}up(i){if(this.$element.is("[disabled]"))return void console.info("Cannot call up on an accordion that is disabled.");const e=i.parent();if(!e.hasClass("is-active"))return;const t=e.siblings();(this.options.allowAllClosed||t.hasClass("is-active"))&&this._closeTab(i)}_openSingleTab(i){const e=this.$element.children(".is-active").children("[data-tab-content]");e.length&&this._closeTab(e.not(i)),this._openTab(i)}_openTab(i){const e=i.parent(),t=i.attr("aria-labelledby");i.attr("aria-hidden",!1),e.addClass("is-active"),$(`#${t}`).attr({"aria-expanded":!0,"aria-selected":!0}),i.finish().slideDown(this.options.slideSpeed,()=>{this.$element.trigger("down.zf.accordion",[i])})}_closeTab(i){const e=i.parent(),t=i.attr("aria-labelledby");i.attr("aria-hidden",!0),e.removeClass("is-active"),$(`#${t}`).attr({"aria-expanded":!1,"aria-selected":!1}),i.finish().slideUp(this.options.slideSpeed,()=>{this.$element.trigger("up.zf.accordion",[i])})}_closeAllTabs(){var i=this.$element.children(".is-active").children("[data-tab-content]");i.length&&this._closeTab(i)}_destroy(){this.$element.find("[data-tab-content]").stop(!0).slideUp(0).css("display",""),this.$element.find("a").off(".zf.accordion"),this.options.deepLink&&$(window).off("hashchange",this._checkDeepLink)}}Accordion.defaults={slideSpeed:250,multiExpand:!1,allowAllClosed:!1,deepLink:!1,deepLinkSmudge:!1,deepLinkSmudgeDelay:300,deepLinkSmudgeOffset:0,updateHistory:!1};export{Accordion};
//# sourceMappingURL=/sm/8ddf57bc3a2cef270f71e2bc6f325d82193dd4507061c04189f12ac96fbf530b.map