/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.orbit.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Keyboard}from"./foundation.util.keyboard";import{Motion}from"./foundation.util.motion";import{Timer}from"./foundation.util.timer";import{onImagesLoaded}from"./foundation.util.imageLoader";import{GetYoDigits}from"./foundation.core.utils";import{Plugin}from"./foundation.core.plugin";import{Touch}from"./foundation.util.touch";class Orbit extends Plugin{_setup(t,i){this.$element=t,this.options=$.extend({},Orbit.defaults,this.$element.data(),i),this.className="Orbit",Touch.init($),this._init(),Keyboard.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}_init(){this._reset(),this.$wrapper=this.$element.find(`.${this.options.containerClass}`),this.$slides=this.$element.find(`.${this.options.slideClass}`);var t=this.$element.find("img"),i=this.$slides.filter(".is-active"),e=this.$element[0].id||GetYoDigits(6,"orbit");this.$element.attr({"data-resize":e,id:e}),i.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),t.length?onImagesLoaded(t,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&this.$slides.length>1&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}_loadBullets(){this.$bullets=this.$element.find(`.${this.options.boxOfBullets}`).find("button")}geoSync(){var t=this;this.timer=new Timer(this.$element,{duration:this.options.timerDelay,infinite:!1},function(){t.changeSlide(!0)}),this.timer.start()}_prepareForOrbit(){this._setWrapperHeight()}_setWrapperHeight(t){var i,e=0,s=0,n=this;this.$slides.each(function(){i=this.getBoundingClientRect().height,$(this).attr("data-slide",s),/mui/g.test($(this)[0].className)||n.$slides.filter(".is-active")[0]===n.$slides.eq(s)[0]||$(this).css({display:"none"}),e=i>e?i:e,s++}),s===this.$slides.length&&(this.$wrapper.css({height:e}),t&&t(e))}_setSlideHeight(t){this.$slides.each(function(){$(this).css("max-height",t)})}_events(){var t=this;if(this.$element.off(".resizeme.zf.trigger").on({"resizeme.zf.trigger":this._prepareForOrbit.bind(this)}),this.$slides.length>1){if(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",function(i){i.preventDefault(),t.changeSlide(!0)}).on("swiperight.zf.orbit",function(i){i.preventDefault(),t.changeSlide(!1)}),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",function(){t.$element.data("clickedOn",!t.$element.data("clickedOn")),t.timer[t.$element.data("clickedOn")?"pause":"start"]()}),this.options.pauseOnHover&&this.$element.on("mouseenter.zf.orbit",function(){t.timer.pause()}).on("mouseleave.zf.orbit",function(){t.$element.data("clickedOn")||t.timer.start()})),this.options.navButtons)this.$element.find(`.${this.options.nextClass}, .${this.options.prevClass}`).attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",function(i){i.preventDefault(),t.changeSlide($(this).hasClass(t.options.nextClass))});this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",function(){if(/is-active/g.test(this.className))return!1;var i=$(this).data("slide"),e=i>t.$slides.filter(".is-active").data("slide"),s=t.$slides.eq(i);t.changeSlide(e,s,i)}),this.options.accessible&&this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",function(i){Keyboard.handleKey(i,"Orbit",{next:function(){t.changeSlide(!0)},previous:function(){t.changeSlide(!1)},handled:function(){$(i.target).is(t.$bullets)&&t.$bullets.filter(".is-active").focus()}})})}}_reset(){void 0!==this.$slides&&this.$slides.length>1&&(this.$element.off(".zf.orbit").find("*").off(".zf.orbit"),this.options.autoPlay&&this.timer.restart(),this.$slides.each(function(t){$(t).removeClass("is-active is-active is-in").removeAttr("aria-live").hide()}),this.$slides.first().addClass("is-active").show(),this.$element.trigger("slidechange.zf.orbit",[this.$slides.first()]),this.options.bullets&&this._updateBullets(0))}changeSlide(t,i,e){if(this.$slides){var s=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(s[0].className))return!1;var n,o=this.$slides.first(),l=this.$slides.last(),a=t?"Right":"Left",r=t?"Left":"Right",h=this;(n=i||(t?this.options.infiniteWrap?s.next(`.${this.options.slideClass}`).length?s.next(`.${this.options.slideClass}`):o:s.next(`.${this.options.slideClass}`):this.options.infiniteWrap?s.prev(`.${this.options.slideClass}`).length?s.prev(`.${this.options.slideClass}`):l:s.prev(`.${this.options.slideClass}`))).length&&(this.$element.trigger("beforeslidechange.zf.orbit",[s,n]),this.options.bullets&&(e=e||this.$slides.index(n),this._updateBullets(e)),this.options.useMUI&&!this.$element.is(":hidden")?(Motion.animateIn(n.addClass("is-active"),this.options[`animInFrom${a}`],function(){n.css({display:"block"}).attr("aria-live","polite")}),Motion.animateOut(s.removeClass("is-active"),this.options[`animOutTo${r}`],function(){s.removeAttr("aria-live"),h.options.autoPlay&&!h.timer.isPaused&&h.timer.restart()})):(s.removeClass("is-active is-in").removeAttr("aria-live").hide(),n.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[n]))}}_updateBullets(t){var i=this.$bullets.filter(".is-active"),e=this.$bullets.not(".is-active"),s=this.$bullets.eq(t);i.removeClass("is-active").blur(),s.addClass("is-active");var n=i.children("[data-slide-active-label]").last();if(!n.length){var o=i.children("span");e.toArray().map(t=>$(t).children("span").length).every(t=>t<o.length)&&(n=o.last()).attr("data-slide-active-label","")}n.length&&(n.detach(),s.append(n))}_destroy(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide()}}Orbit.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0};export{Orbit};
//# sourceMappingURL=/sm/6ee803f9f455c8aedfe7b9deb2e843cd26c7824ffb91ab56eaeda482b9af942f.map