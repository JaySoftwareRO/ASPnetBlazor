/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.abide.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Plugin}from"./foundation.core.plugin";import{GetYoDigits}from"./foundation.core.utils";class Abide extends Plugin{_setup(t,e={}){this.$element=t,this.options=$.extend(!0,{},Abide.defaults,this.$element.data(),e),this.isEnabled=!0,this.formnovalidate=null,this.className="Abide",this._init()}_init(){this.$inputs=$.merge(this.$element.find("input").not('[type="submit"]'),this.$element.find("textarea, select")),this.$submits=this.$element.find('[type="submit"]');const t=this.$element.find("[data-abide-error]");this.options.a11yAttributes&&(this.$inputs.each((t,e)=>this.addA11yAttributes($(e))),t.each((t,e)=>this.addGlobalErrorA11yAttributes($(e)))),this._events()}_events(){this.$element.off(".abide").on("reset.zf.abide",()=>{this.resetForm()}).on("submit.zf.abide",()=>this.validateForm()),this.$submits.off("click.zf.abide keydown.zf.abide").on("click.zf.abide keydown.zf.abide",t=>{t.key&&" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),this.formnovalidate=null!==t.target.getAttribute("formnovalidate"),this.$element.submit())}),"fieldChange"===this.options.validateOn&&this.$inputs.off("change.zf.abide").on("change.zf.abide",t=>{this.validateInput($(t.target))}),this.options.liveValidate&&this.$inputs.off("input.zf.abide").on("input.zf.abide",t=>{this.validateInput($(t.target))}),this.options.validateOnBlur&&this.$inputs.off("blur.zf.abide").on("blur.zf.abide",t=>{this.validateInput($(t.target))})}_reflow(){this._init()}_validationIsDisabled(){return!1===this.isEnabled||("boolean"==typeof this.formnovalidate?this.formnovalidate:!!this.$submits.length&&null!==this.$submits[0].getAttribute("formnovalidate"))}enableValidation(){this.isEnabled=!0}disableValidation(){this.isEnabled=!1}requiredCheck(t){if(!t.attr("required"))return!0;var e=!0;switch(t[0].type){case"checkbox":e=t[0].checked;break;case"select":case"select-one":case"select-multiple":var a=t.find("option:selected");a.length&&a.val()||(e=!1);break;default:t.val()&&t.val().length||(e=!1)}return e}findFormError(t,e){var a=t.length?t[0].id:"",i=t.siblings(this.options.formErrorSelector);return i.length||(i=t.parent().find(this.options.formErrorSelector)),a&&(i=i.add(this.$element.find(`[data-form-error-for="${a}"]`))),e&&(i=i.not("[data-form-error-on]"),e.forEach(e=>{i=(i=i.add(t.siblings(`[data-form-error-on="${e}"]`))).add(this.$element.find(`[data-form-error-for="${a}"][data-form-error-on="${e}"]`))})),i}findLabel(t){var e=t[0].id,a=this.$element.find(`label[for="${e}"]`);return a.length?a:t.closest("label")}findRadioLabels(t){var e=t.map((t,e)=>{var a=e.id,i=this.$element.find(`label[for="${a}"]`);return i.length||(i=$(e).closest("label")),i[0]});return $(e)}findCheckboxLabels(t){var e=t.map((t,e)=>{var a=e.id,i=this.$element.find(`label[for="${a}"]`);return i.length||(i=$(e).closest("label")),i[0]});return $(e)}addErrorClasses(t,e){var a=this.findLabel(t),i=this.findFormError(t,e);a.length&&a.addClass(this.options.labelErrorClass),i.length&&i.addClass(this.options.formErrorClass),t.addClass(this.options.inputErrorClass).attr({"data-invalid":"","aria-invalid":!0})}addA11yAttributes(t){let e=this.findFormError(t),a=e.filter("label"),i=e.first();if(e.length){if(void 0===t.attr("aria-describedby")){let e=i.attr("id");void 0===e&&(e=GetYoDigits(6,"abide-error"),i.attr("id",e)),t.attr("aria-describedby",e)}if(a.filter("[for]").length<a.length){let e=t.attr("id");void 0===e&&(e=GetYoDigits(6,"abide-input"),t.attr("id",e)),a.each((t,a)=>{const i=$(a);void 0===i.attr("for")&&i.attr("for",e)})}e.each((t,e)=>{const a=$(e);void 0===a.attr("role")&&a.attr("role","alert")}).end()}}addGlobalErrorA11yAttributes(t){void 0===t.attr("aria-live")&&t.attr("aria-live",this.options.a11yErrorLevel)}removeRadioErrorClasses(t){var e=this.$element.find(`:radio[name="${t}"]`),a=this.findRadioLabels(e),i=this.findFormError(e);a.length&&a.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).attr({"data-invalid":null,"aria-invalid":null})}removeCheckboxErrorClasses(t){var e=this.$element.find(`:checkbox[name="${t}"]`),a=this.findCheckboxLabels(e),i=this.findFormError(e);a.length&&a.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).attr({"data-invalid":null,"aria-invalid":null})}removeErrorClasses(t){if("radio"==t[0].type)return this.removeRadioErrorClasses(t.attr("name"));if("checkbox"==t[0].type)return this.removeCheckboxErrorClasses(t.attr("name"));var e=this.findLabel(t),a=this.findFormError(t);e.length&&e.removeClass(this.options.labelErrorClass),a.length&&a.removeClass(this.options.formErrorClass),t.removeClass(this.options.inputErrorClass).attr({"data-invalid":null,"aria-invalid":null})}validateInput(t){var e=this.requiredCheck(t),a=t.attr("data-validator"),i=[],r=!0;if(this._validationIsDisabled())return!0;if(t.is("[data-abide-ignore]")||t.is('[type="hidden"]')||t.is("[disabled]"))return!0;switch(t[0].type){case"radio":this.validateRadio(t.attr("name"))||i.push("required");break;case"checkbox":this.validateCheckbox(t.attr("name"))||i.push("required"),r=!1;break;case"select":case"select-one":case"select-multiple":e||i.push("required");break;default:e||i.push("required"),this.validateText(t)||i.push("pattern")}if(a){const e=!!t.attr("required");a.split(" ").forEach(a=>{this.options.validators[a](t,e,t.parent())||i.push(a)})}t.attr("data-equalto")&&(this.options.validators.equalTo(t)||i.push("equalTo"));var s=0===i.length,l=(s?"valid":"invalid")+".zf.abide";if(s){const e=this.$element.find(`[data-equalto="${t.attr("id")}"]`);if(e.length){let t=this;e.each(function(){$(this).val()&&t.validateInput($(this))})}}return r&&(this.removeErrorClasses(t),s||this.addErrorClasses(t,i)),t.trigger(l,[t]),s}validateForm(){var t,e=[],a=this;if(this.initialized||(this.initialized=!0),this._validationIsDisabled())return this.formnovalidate=null,!0;this.$inputs.each(function(){if("checkbox"===$(this)[0].type){if($(this).attr("name")===t)return!0;t=$(this).attr("name")}e.push(a.validateInput($(this)))});var i=-1===e.indexOf(!1);return this.$element.find("[data-abide-error]").each((t,e)=>{const a=$(e);this.options.a11yAttributes&&this.addGlobalErrorA11yAttributes(a),a.css("display",i?"none":"block")}),this.$element.trigger((i?"formvalid":"forminvalid")+".zf.abide",[this.$element]),i}validateText(t,e){e=e||t.attr("data-pattern")||t.attr("pattern")||t.attr("type");var a=t.val(),i=!0;return a.length&&(this.options.patterns.hasOwnProperty(e)?i=this.options.patterns[e].test(a):e!==t.attr("type")&&(i=new RegExp(e).test(a))),i}validateRadio(t){var e=this.$element.find(`:radio[name="${t}"]`),a=!1,i=!1;return e.each((t,e)=>{$(e).attr("required")&&(i=!0)}),i||(a=!0),a||e.each((t,e)=>{$(e).prop("checked")&&(a=!0)}),a}validateCheckbox(t){var e=this.$element.find(`:checkbox[name="${t}"]`),a=!1,i=!1,r=1,s=0;return e.each((t,e)=>{$(e).attr("required")&&(i=!0)}),i||(a=!0),a||(e.each((t,e)=>{$(e).prop("checked")&&s++,void 0!==$(e).attr("data-min-required")&&(r=parseInt($(e).attr("data-min-required")))}),s>=r&&(a=!0)),!0!==this.initialized&&r>1||(e.each((t,e)=>{a?this.removeErrorClasses($(e)):this.addErrorClasses($(e),["required"])}),a)}matchValidation(t,e,a){return a=!!a,-1===e.split(" ").map(e=>this.options.validators[e](t,a,t.parent())).indexOf(!1)}resetForm(){var t=this.$element,e=this.options;$(`.${e.labelErrorClass}`,t).not("small").removeClass(e.labelErrorClass),$(`.${e.inputErrorClass}`,t).not("small").removeClass(e.inputErrorClass),$(`${e.formErrorSelector}.${e.formErrorClass}`).removeClass(e.formErrorClass),t.find("[data-abide-error]").css("display","none"),$(":input",t).not(":button, :submit, :reset, :hidden, :radio, :checkbox, [data-abide-ignore]").val("").attr({"data-invalid":null,"aria-invalid":null}),$(":input:radio",t).not("[data-abide-ignore]").prop("checked",!1).attr({"data-invalid":null,"aria-invalid":null}),$(":input:checkbox",t).not("[data-abide-ignore]").prop("checked",!1).attr({"data-invalid":null,"aria-invalid":null}),t.trigger("formreset.zf.abide",[t])}_destroy(){var t=this;this.$element.off(".abide").find("[data-abide-error]").css("display","none"),this.$inputs.off(".abide").each(function(){t.removeErrorClasses($(this))}),this.$submits.off(".abide")}}Abide.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",a11yAttributes:!0,a11yErrorLevel:"assertive",liveValidate:!1,validateOnBlur:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(?:222[1-9]|2[3-6][0-9]{2}|27[0-1][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^((?:(https?|ftps?|file|ssh|sftp):\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,website:{test:t=>Abide.defaults.patterns.domain.test(t)||Abide.defaults.patterns.url.test(t)}},validators:{equalTo:function(t,e,a){return $(`#${t.attr("data-equalto")}`).val()===t.val()}}};export{Abide};
//# sourceMappingURL=/sm/aae434fa2667a8b678ce65645db305f8fe534d2c5860bf2a46444e1b3d75e9fc.map