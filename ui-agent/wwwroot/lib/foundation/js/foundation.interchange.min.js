/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.interchange.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{MediaQuery}from"./foundation.util.mediaQuery";import{Plugin}from"./foundation.core.plugin";import{GetYoDigits}from"./foundation.core.utils";import{Triggers}from"./foundation.util.triggers";class Interchange extends Plugin{_setup(e,t){this.$element=e,this.options=$.extend({},Interchange.defaults,this.$element.data(),t),this.rules=[],this.currentPath="",this.className="Interchange",Triggers.init($),this._init(),this._events()}_init(){MediaQuery._init();var e=this.$element[0].id||GetYoDigits(6,"interchange");this.$element.attr({"data-resize":e,id:e}),this._parseOptions(),this._addBreakpoints(),this._generateRules(),this._reflow()}_events(){this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",()=>this._reflow())}_reflow(){var e;for(var t in this.rules)if(this.rules.hasOwnProperty(t)){var i=this.rules[t];window.matchMedia(i.query).matches&&(e=i)}e&&this.replace(e.path)}_parseOptions(){void 0===this.options.type?this.options.type="auto":-1===["auto","src","background","html"].indexOf(this.options.type)&&(console.log(`Warning: invalid value "${this.options.type}" for Interchange option "type"`),this.options.type="auto")}_addBreakpoints(){for(var e in MediaQuery.queries)if(MediaQuery.queries.hasOwnProperty(e)){var t=MediaQuery.queries[e];Interchange.SPECIAL_QUERIES[t.name]=t.value}}_generateRules(e){var t,i=[];for(var r in t="string"==typeof(t=this.options.rules?this.options.rules:this.$element.data("interchange"))?t.match(/\[.*?, .*?\]/g):t)if(t.hasOwnProperty(r)){var n=t[r].slice(1,-1).split(", "),s=n.slice(0,-1).join(""),a=n[n.length-1];Interchange.SPECIAL_QUERIES[a]&&(a=Interchange.SPECIAL_QUERIES[a]),i.push({path:s,query:a})}this.rules=i}replace(e){if(this.currentPath!==e){var t="replaced.zf.interchange",i=this.options.type;"auto"===i&&(i="IMG"===this.$element[0].nodeName?"src":e.match(/\.(gif|jpe?g|png|svg|tiff)([?#].*)?/i)?"background":"html"),"src"===i?this.$element.attr("src",e).on("load",()=>{this.currentPath=e}).trigger(t):"background"===i?(e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),this.$element.css({"background-image":"url("+e+")"}).trigger(t)):"html"===i&&$.get(e,i=>{this.$element.html(i).trigger(t),$(i).foundation(),this.currentPath=e})}}_destroy(){this.$element.off("resizeme.zf.trigger")}}Interchange.defaults={rules:null,type:"auto"},Interchange.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"};export{Interchange};
//# sourceMappingURL=/sm/4c85d6cb88ab6605fdc1d15392f613e29d03192faf5a9a04ce276e97f14093ca.map