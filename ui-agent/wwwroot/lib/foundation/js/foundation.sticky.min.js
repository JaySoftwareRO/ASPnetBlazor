/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.sticky.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Plugin}from"./foundation.core.plugin";import{onLoad,GetYoDigits}from"./foundation.core.utils";import{MediaQuery}from"./foundation.util.mediaQuery";import{Triggers}from"./foundation.util.triggers";class Sticky extends Plugin{_setup(t,i){this.$element=t,this.options=$.extend({},Sticky.defaults,this.$element.data(),i),this.className="Sticky",Triggers.init($),this._init()}_init(){MediaQuery._init();var t=this.$element.parent("[data-sticky-container]"),i=this.$element[0].id||GetYoDigits(6,"sticky"),s=this;t.length?this.$container=t:(this.wasWrapped=!0,this.$element.wrap(this.options.container),this.$container=this.$element.parent()),this.$container.addClass(this.options.containerClass),this.$element.addClass(this.options.stickyClass).attr({"data-resize":i,"data-mutate":i}),""!==this.options.anchor&&$("#"+s.options.anchor).attr({"data-mutate":i}),this.scrollCount=this.options.checkEvery,this.isStuck=!1,this.onLoadListener=onLoad($(window),function(){s.containerHeight="none"==s.$element.css("display")?0:s.$element[0].getBoundingClientRect().height,s.$container.css("height",s.containerHeight),s.elemHeight=s.containerHeight,""!==s.options.anchor?s.$anchor=$("#"+s.options.anchor):s._parsePoints(),s._setSizes(function(){var t=window.pageYOffset;s._calc(!1,t),s.isStuck||s._removeSticky(!(t>=s.topPoint))}),s._events(i.split("-").reverse().join("-"))})}_parsePoints(){for(var t=[""==this.options.topAnchor?1:this.options.topAnchor,""==this.options.btmAnchor?document.documentElement.scrollHeight:this.options.btmAnchor],i={},s=0,e=t.length;s<e&&t[s];s++){var n;if("number"==typeof t[s])n=t[s];else{var o=t[s].split(":"),h=$(`#${o[0]}`);n=h.offset().top,o[1]&&"bottom"===o[1].toLowerCase()&&(n+=h[0].getBoundingClientRect().height)}i[s]=n}this.points=i}_events(t){var i=this,s=this.scrollListener=`scroll.zf.${t}`;this.isOn||(this.canStick&&(this.isOn=!0,$(window).off(s).on(s,function(t){0===i.scrollCount?(i.scrollCount=i.options.checkEvery,i._setSizes(function(){i._calc(!1,window.pageYOffset)})):(i.scrollCount--,i._calc(!1,window.pageYOffset))})),this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",function(s,e){i._eventsHandler(t)}),this.$element.on("mutateme.zf.trigger",function(s,e){i._eventsHandler(t)}),this.$anchor&&this.$anchor.on("mutateme.zf.trigger",function(s,e){i._eventsHandler(t)}))}_eventsHandler(t){var i=this,s=this.scrollListener=`scroll.zf.${t}`;i._setSizes(function(){i._calc(!1),i.canStick?i.isOn||i._events(t):i.isOn&&i._pauseListeners(s)})}_pauseListeners(t){this.isOn=!1,$(window).off(t),this.$element.trigger("pause.zf.sticky")}_calc(t,i){if(t&&this._setSizes(),!this.canStick)return this.isStuck&&this._removeSticky(!0),!1;i||(i=window.pageYOffset),i>=this.topPoint?i<=this.bottomPoint?this.isStuck||this._setSticky():this.isStuck&&this._removeSticky(!1):this.isStuck&&this._removeSticky(!0)}_setSticky(){var t=this,i=this.options.stickTo,s="top"===i?"marginTop":"marginBottom",e="top"===i?"bottom":"top",n={};n[s]=`${this.options[s]}em`,n[i]=0,n[e]="auto",this.isStuck=!0,this.$element.removeClass(`is-anchored is-at-${e}`).addClass(`is-stuck is-at-${i}`).css(n).trigger(`sticky.zf.stuckto:${i}`),this.$element.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){t._setSizes()})}_removeSticky(t){var i=this.options.stickTo,s="top"===i,e={},n=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,o=t?"top":"bottom";e[s?"marginTop":"marginBottom"]=0,e.bottom="auto",e.top=t?0:n,this.isStuck=!1,this.$element.removeClass(`is-stuck is-at-${i}`).addClass(`is-anchored is-at-${o}`).css(e).trigger(`sticky.zf.unstuckfrom:${o}`)}_setSizes(t){this.canStick=MediaQuery.is(this.options.stickyOn),this.canStick||t&&"function"==typeof t&&t();var i=this.$container[0].getBoundingClientRect().width,s=window.getComputedStyle(this.$container[0]),e=parseInt(s["padding-left"],10),n=parseInt(s["padding-right"],10);if(this.$anchor&&this.$anchor.length?this.anchorHeight=this.$anchor[0].getBoundingClientRect().height:this._parsePoints(),this.$element.css({"max-width":`${i-e-n}px`}),this.options.dynamicHeight||!this.containerHeight){var o=this.$element[0].getBoundingClientRect().height||this.containerHeight;o="none"==this.$element.css("display")?0:o,this.$container.css("height",o),this.containerHeight=o}if(this.elemHeight=this.containerHeight,!this.isStuck&&this.$element.hasClass("is-at-bottom")){var h=(this.points?this.points[1]-this.$container.offset().top:this.anchorHeight)-this.elemHeight;this.$element.css("top",h)}this._setBreakPoints(this.containerHeight,function(){t&&"function"==typeof t&&t()})}_setBreakPoints(t,i){if(!this.canStick){if(!i||"function"!=typeof i)return!1;i()}var s=emCalc(this.options.marginTop),e=emCalc(this.options.marginBottom),n=this.points?this.points[0]:this.$anchor.offset().top,o=this.points?this.points[1]:n+this.anchorHeight,h=window.innerHeight;"top"===this.options.stickTo?(n-=s,o-=t+s):"bottom"===this.options.stickTo&&(n-=h-(t+e),o-=h-e),this.topPoint=n,this.bottomPoint=o,i&&"function"==typeof i&&i()}_destroy(){this._removeSticky(!0),this.$element.removeClass(`${this.options.stickyClass} is-anchored is-at-top`).css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger").off("mutateme.zf.trigger"),this.$anchor&&this.$anchor.length&&this.$anchor.off("change.zf.sticky"),this.scrollListener&&$(window).off(this.scrollListener),this.onLoadListener&&$(window).off(this.onLoadListener),this.wasWrapped?this.$element.unwrap():this.$container.removeClass(this.options.containerClass).css({height:""})}}function emCalc(t){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*t}Sticky.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",dynamicHeight:!0,checkEvery:-1};export{Sticky};
//# sourceMappingURL=/sm/f47a9335d7ea88b7c67fb7d9fa9cd252df279d89a82bfcc15e6438980e2dde61.map