/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.equalizer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{MediaQuery}from"./foundation.util.mediaQuery";import{onImagesLoaded}from"./foundation.util.imageLoader";import{GetYoDigits}from"./foundation.core.utils";import{Plugin}from"./foundation.core.plugin";class Equalizer extends Plugin{_setup(e,t){this.$element=e,this.options=$.extend({},Equalizer.defaults,this.$element.data(),t),this.className="Equalizer",this._init()}_init(){var e=this.$element.attr("data-equalizer")||"",t=this.$element.find(`[data-equalizer-watch="${e}"]`);MediaQuery._init(),this.$watched=t.length?t:this.$element.find("[data-equalizer-watch]"),this.$element.attr("data-resize",e||GetYoDigits(6,"eq")),this.$element.attr("data-mutate",e||GetYoDigits(6,"eq")),this.hasNested=this.$element.find("[data-equalizer]").length>0,this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0,this.isOn=!1,this._bindHandler={onResizeMeBound:this._onResizeMe.bind(this),onPostEqualizedBound:this._onPostEqualized.bind(this)};var i,s=this.$element.find("img");this.options.equalizeOn?(i=this._checkMQ(),$(window).on("changed.zf.mediaquery",this._checkMQ.bind(this))):this._events(),(void 0!==i&&!1===i||void 0===i)&&(s.length?onImagesLoaded(s,this._reflow.bind(this)):this._reflow())}_pauseEvents(){this.isOn=!1,this.$element.off({".zf.equalizer":this._bindHandler.onPostEqualizedBound,"resizeme.zf.trigger":this._bindHandler.onResizeMeBound,"mutateme.zf.trigger":this._bindHandler.onResizeMeBound})}_onResizeMe(e){this._reflow()}_onPostEqualized(e){e.target!==this.$element[0]&&this._reflow()}_events(){this._pauseEvents(),this.hasNested?this.$element.on("postequalized.zf.equalizer",this._bindHandler.onPostEqualizedBound):(this.$element.on("resizeme.zf.trigger",this._bindHandler.onResizeMeBound),this.$element.on("mutateme.zf.trigger",this._bindHandler.onResizeMeBound)),this.isOn=!0}_checkMQ(){var e=!MediaQuery.is(this.options.equalizeOn);return e?this.isOn&&(this._pauseEvents(),this.$watched.css("height","auto")):this.isOn||this._events(),e}_killswitch(){}_reflow(){if(!this.options.equalizeOnStack&&this._isStacked())return this.$watched.css("height","auto"),!1;this.options.equalizeByRow?this.getHeightsByRow(this.applyHeightByRow.bind(this)):this.getHeights(this.applyHeight.bind(this))}_isStacked(){return!this.$watched[0]||!this.$watched[1]||this.$watched[0].getBoundingClientRect().top!==this.$watched[1].getBoundingClientRect().top}getHeights(e){for(var t=[],i=0,s=this.$watched.length;i<s;i++)this.$watched[i].style.height="auto",t.push(this.$watched[i].offsetHeight);e(t)}getHeightsByRow(e){var t=this.$watched.length?this.$watched.first().offset().top:0,i=[],s=0;i[s]=[];for(var h=0,a=this.$watched.length;h<a;h++){this.$watched[h].style.height="auto";var n=$(this.$watched[h]).offset().top;n!=t&&(i[++s]=[],t=n),i[s].push([this.$watched[h],this.$watched[h].offsetHeight])}for(var o=0,r=i.length;o<r;o++){var l=$(i[o]).map(function(){return this[1]}).get(),d=Math.max.apply(null,l);i[o].push(d)}e(i)}applyHeight(e){var t=Math.max.apply(null,e);this.$element.trigger("preequalized.zf.equalizer"),this.$watched.css("height",t),this.$element.trigger("postequalized.zf.equalizer")}applyHeightByRow(e){this.$element.trigger("preequalized.zf.equalizer");for(var t=0,i=e.length;t<i;t++){var s=e[t].length,h=e[t][s-1];if(s<=2)$(e[t][0][0]).css({height:"auto"});else{this.$element.trigger("preequalizedrow.zf.equalizer");for(var a=0,n=s-1;a<n;a++)$(e[t][a][0]).css({height:h});this.$element.trigger("postequalizedrow.zf.equalizer")}}this.$element.trigger("postequalized.zf.equalizer")}_destroy(){this._pauseEvents(),this.$watched.css("height","auto")}}Equalizer.defaults={equalizeOnStack:!1,equalizeByRow:!1,equalizeOn:""};export{Equalizer};
//# sourceMappingURL=/sm/0020d6caf70c0ff36cd1fb7b8b2961db90cda28aff093d4c63342a01f030cec7.map