/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/foundation-sites@6.6.3/js/foundation.tabs.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import $ from"jquery";import{Plugin}from"./foundation.core.plugin";import{onLoad}from"./foundation.core.utils";import{Keyboard}from"./foundation.util.keyboard";import{onImagesLoaded}from"./foundation.util.imageLoader";class Tabs extends Plugin{_setup(t,i){this.$element=t,this.options=$.extend({},Tabs.defaults,this.$element.data(),i),this.className="Tabs",this._init(),Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}_init(){var t=this;if(this._isInitializing=!0,this.$element.attr({role:"tablist"}),this.$tabTitles=this.$element.find(`.${this.options.linkClass}`),this.$tabContent=$(`[data-tabs-content="${this.$element[0].id}"]`),this.$tabTitles.each(function(){var i=$(this),e=i.find("a"),s=i.hasClass(`${t.options.linkActiveClass}`),a=e.attr("data-tabs-target")||e[0].hash.slice(1),n=e[0].id?e[0].id:`${a}-label`,o=$(`#${a}`);i.attr({role:"presentation"}),e.attr({role:"tab","aria-controls":a,"aria-selected":s,id:n,tabindex:s?"0":"-1"}),o.attr({role:"tabpanel","aria-labelledby":n}),s&&(t._initialAnchor=`#${a}`),s||o.attr("aria-hidden","true"),s&&t.options.autoFocus&&(t.onLoadListener=onLoad($(window),function(){$("html, body").animate({scrollTop:i.offset().top},t.options.deepLinkSmudgeDelay,()=>{e.focus()})}))}),this.options.matchHeight){var i=this.$tabContent.find("img");i.length?onImagesLoaded(i,this._setHeight.bind(this)):this._setHeight()}this._checkDeepLink=(()=>{var t=window.location.hash;if(!t.length){if(this._isInitializing)return;this._initialAnchor&&(t=this._initialAnchor)}var i=t.indexOf("#")>=0?t.slice(1):t,e=i&&$(`#${i}`),s=t&&this.$element.find(`[href$="${t}"],[data-tabs-target="${i}"]`).first();if(!(!e.length||!s.length)){if(e&&e.length&&s&&s.length?this.selectTab(e,!0):this._collapse(),this.options.deepLinkSmudge){var a=this.$element.offset();$("html, body").animate({scrollTop:a.top},this.options.deepLinkSmudgeDelay)}this.$element.trigger("deeplink.zf.tabs",[s,e])}}),this.options.deepLink&&this._checkDeepLink(),this._events(),this._isInitializing=!1}_events(){this._addKeyHandler(),this._addClickHandler(),this._setHeightMqHandler=null,this.options.matchHeight&&(this._setHeightMqHandler=this._setHeight.bind(this),$(window).on("changed.zf.mediaquery",this._setHeightMqHandler)),this.options.deepLink&&$(window).on("hashchange",this._checkDeepLink)}_addClickHandler(){var t=this;this.$element.off("click.zf.tabs").on("click.zf.tabs",`.${this.options.linkClass}`,function(i){i.preventDefault(),t._handleTabChange($(this))})}_addKeyHandler(){var t=this;this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(i){if(9!==i.which){var e,s,a=$(this),n=a.parent("ul").children("li");n.each(function(i){$(this).is(a)&&(t.options.wrapOnKeys?(e=0===i?n.last():n.eq(i-1),s=i===n.length-1?n.first():n.eq(i+1)):(e=n.eq(Math.max(0,i-1)),s=n.eq(Math.min(i+1,n.length-1))))}),Keyboard.handleKey(i,"Tabs",{open:function(){a.find('[role="tab"]').focus(),t._handleTabChange(a)},previous:function(){e.find('[role="tab"]').focus(),t._handleTabChange(e)},next:function(){s.find('[role="tab"]').focus(),t._handleTabChange(s)},handled:function(){i.preventDefault()}})}})}_handleTabChange(t,i){if(t.hasClass(`${this.options.linkActiveClass}`))this.options.activeCollapse&&this._collapse();else{var e=this.$element.find(`.${this.options.linkClass}.${this.options.linkActiveClass}`),s=t.find('[role="tab"]'),a=s.attr("data-tabs-target"),n=a&&a.length?`#${a}`:s[0].hash,o=this.$tabContent.find(n);this._collapseTab(e),this._openTab(t),this.options.deepLink&&!i&&(this.options.updateHistory?history.pushState({},"",n):history.replaceState({},"",n)),this.$element.trigger("change.zf.tabs",[t,o]),o.find("[data-mutate]").trigger("mutateme.zf.trigger")}}_openTab(t){var i=t.find('[role="tab"]'),e=i.attr("data-tabs-target")||i[0].hash.slice(1),s=this.$tabContent.find(`#${e}`);t.addClass(`${this.options.linkActiveClass}`),i.attr({"aria-selected":"true",tabindex:"0"}),s.addClass(`${this.options.panelActiveClass}`).removeAttr("aria-hidden")}_collapseTab(t){var i=t.removeClass(`${this.options.linkActiveClass}`).find('[role="tab"]').attr({"aria-selected":"false",tabindex:-1});$(`#${i.attr("aria-controls")}`).removeClass(`${this.options.panelActiveClass}`).attr({"aria-hidden":"true"})}_collapse(){var t=this.$element.find(`.${this.options.linkClass}.${this.options.linkActiveClass}`);t.length&&(this._collapseTab(t),this.$element.trigger("collapse.zf.tabs",[t]))}selectTab(t,i){var e,s;(e="object"==typeof t?t[0].id:t).indexOf("#")<0?s=`#${e}`:(s=e,e=e.slice(1));var a=this.$tabTitles.has(`[href$="${s}"],[data-tabs-target="${e}"]`).first();this._handleTabChange(a,i)}_setHeight(){var t=0,i=this;this.$tabContent.find(`.${this.options.panelClass}`).css("height","").each(function(){var e=$(this),s=e.hasClass(`${i.options.panelActiveClass}`);s||e.css({visibility:"hidden",display:"block"});var a=this.getBoundingClientRect().height;s||e.css({visibility:"",display:""}),t=a>t?a:t}).css("height",`${t}px`)}_destroy(){this.$element.find(`.${this.options.linkClass}`).off(".zf.tabs").hide().end().find(`.${this.options.panelClass}`).hide(),this.options.matchHeight&&null!=this._setHeightMqHandler&&$(window).off("changed.zf.mediaquery",this._setHeightMqHandler),this.options.deepLink&&$(window).off("hashchange",this._checkDeepLink),this.onLoadListener&&$(window).off(this.onLoadListener)}}Tabs.defaults={deepLink:!1,deepLinkSmudge:!1,deepLinkSmudgeDelay:300,updateHistory:!1,autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,activeCollapse:!1,linkClass:"tabs-title",linkActiveClass:"is-active",panelClass:"tabs-panel",panelActiveClass:"is-active"};export{Tabs};
//# sourceMappingURL=/sm/ed5dd2b9f31c1cc12969306b158632c03c6dd1d77c9598bbab7a604e3c3697c4.map